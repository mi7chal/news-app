{"ast":null,"code":"var _jsxFileName = \"/Users/michal/Documents/portal_psi/src/register/register.js\";\nimport \"./register.css\";\nimport React, { useState } from \"react\";\nimport { notificationsPush } from \"../redux/actions/\";\nimport { connect } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.validate = {\n      firtstPassword: e => {\n        if (e.target.value.length >= 8) e.target.style.borderColor = \"var(--background3)\";else e.target.style.borderColor = \"#c21d1d\";\n      },\n      secondPassword: e => {\n        if (e.target.value.length >= 8 && this.input.password1.current.value === e.target.value) {\n          e.target.style.borderColor = \"var(--background3)\";\n          this.passwordValid = true;\n          this.setState({\n            before: {\n              login: \"Hasła muszą być identyczne\"\n            }\n          });\n        } else {\n          this.passwordValid = false;\n          e.target.style.borderColor = \"#c21d1d\";\n        }\n      },\n      email: e => {\n        if (e.target.value.includes(\".\") && e.target.value.includes(\"@\")) {\n          e.target.style.borderColor = \"var(--background3)\";\n          this.emailValid = true;\n          this.setState({\n            before: {\n              login: \"\"\n            }\n          });\n        } else {\n          this.emailValid = false;\n          this.setState({\n            before: {\n              login: \"Niepoprawny email\"\n            }\n          });\n          e.target.style.borderColor = \"#c21d1d\";\n        }\n      },\n      login: e => {\n        if (e.target.value.length >= 5) {\n          e.target.style.borderColor = \"var(--background3)\";\n          this.setState({\n            before: {\n              login: \"\"\n            }\n          });\n        } else {\n          e.target.style.borderColor = \"#c21d1d\";\n          this.setState({\n            before: {\n              login: \"Login jest za krótki\"\n            }\n          });\n        }\n      }\n    };\n\n    this.signUp = async () => {\n      if (this.emailValid && this.passwordValid) {\n        const formData = {\n          name: this.input.name.current.value,\n          surname: this.input.surname.current.value,\n          login: this.input.login.current.value,\n          email: this.input.email.current.value,\n          password1: this.input.password1.current.value,\n          password2: this.input.password2.current.value\n        };\n        const fetchData = await fetch(\"http://localhost/blogg/api/register.php\", {\n          credentials: \"include\",\n          method: \"POST\",\n          body: JSON.stringify(formData)\n        });\n        const data = await fetchData.json();\n\n        if (data.status === 1) {\n          this.props.history.push(\"/\");\n          this.props.history.go(0);\n          this.props.push({\n            x: data.info,\n            color: \"\"\n          });\n        } else {\n          //var newNotifications= data.info.map((x,i)=><Modal key={i} color=\"red\">{x}</Modal>);\n          //this.setState({ modal: null });\n          //this.setState({ modal: newNotifications });\n          data.info.map(item => this.props.push({\n            x: item,\n            color: \"red\"\n          }));\n        }\n      } else {\n        return 0;\n      }\n    };\n\n    this.emailValid = false;\n    this.passwordValid = false;\n    this.loginValid = false;\n    this.input = {};\n    this.input.name = /*#__PURE__*/React.createRef();\n    this.input.surname = /*#__PURE__*/React.createRef();\n    this.input.login = /*#__PURE__*/React.createRef();\n    this.input.email = /*#__PURE__*/React.createRef();\n    this.input.password1 = /*#__PURE__*/React.createRef();\n    this.input.password2 = /*#__PURE__*/React.createRef();\n    this.state = {\n      modal: [],\n      before: {\n        login: \" \",\n        email: \" \",\n        password1: \" \",\n        password2: \" \"\n      }\n    };\n\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  onLogout() {}\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"registerBackground\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registerBox\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"registerHeader\",\n            children: \"Zarejestruj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"registerForm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterName\",\n              name: \"name\",\n              placeholder: \"imi\\u0119\",\n              autoComplete: \"off\",\n              ref: this.input.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterSurname\",\n              name: \"surname\",\n              placeholder: \"nazwisko\",\n              autoComplete: \"off\",\n              ref: this.input.surname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: this.state.before.login\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterLogin\",\n                name: \"login\",\n                placeholder: \"login\",\n                autoComplete: \"off\",\n                onChange: e => this.validate.login(e),\n                ref: this.input.login\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: this.state.before.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterEmail\",\n                name: \"email\",\n                placeholder: \"email\",\n                autoComplete: \"off\",\n                onChange: e => this.validate.email(e),\n                ref: this.input.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: this.state.before.password1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword1\",\n                name: \"password1\",\n                placeholder: \"has\\u0142o\",\n                autoComplete: \"off\",\n                onChange: e => this.validate.firtstPassword(e),\n                ref: this.input.password1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: this.state.before.password2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword2\",\n                name: \"password2\",\n                placeholder: \"powt\\xF3rz has\\u0142o\",\n                autoComplete: \"off\",\n                onChange: e => this.validate.secondPassword(e),\n                ref: this.input.password2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexSpace\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reigisterBackButon\",\n              onClick: () => this.props.history.goBack(),\n              children: \"Powr\\xF3t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"buttonFill loginRegisterButton\",\n              onClick: () => this.signUp(),\n              children: \"Zarejestruj\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n\n} // const mapStateToProps = state => ({\n//     isLogged: state.isLogged\n// });\n\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    push: x => dispatch(notificationsPush(x))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Register); //export default Register;","map":{"version":3,"sources":["/Users/michal/Documents/portal_psi/src/register/register.js"],"names":["React","useState","notificationsPush","connect","Register","Component","constructor","props","validate","firtstPassword","e","target","value","length","style","borderColor","secondPassword","input","password1","current","passwordValid","setState","before","login","email","includes","emailValid","signUp","formData","name","surname","password2","fetchData","fetch","credentials","method","body","JSON","stringify","data","json","status","history","push","go","x","info","color","map","item","loginValid","createRef","state","modal","loggedAlready","onLogout","componentDidMount","window","scrollTo","componentDidUpdate","render","goBack","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import \"./register.css\";\r\nimport React, { useState } from \"react\";\r\nimport { notificationsPush } from \"../redux/actions/\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Register extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.emailValid = false;\r\n    this.passwordValid = false;\r\n    this.loginValid = false;\r\n\r\n    this.input = {};\r\n\r\n    this.input.name = React.createRef();\r\n    this.input.surname = React.createRef();\r\n    this.input.login = React.createRef();\r\n    this.input.email = React.createRef();\r\n    this.input.password1 = React.createRef();\r\n    this.input.password2 = React.createRef();\r\n\r\n    this.state = {\r\n      modal: [],\r\n      before: { login: \" \", email: \" \", password1: \" \", password2: \" \" },\r\n    };\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  onLogout() {}\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  validate = {\r\n    firtstPassword: (e) => {\r\n      if (e.target.value.length >= 8)\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n      else e.target.style.borderColor = \"#c21d1d\";\r\n    },\r\n    secondPassword: (e) => {\r\n      if (\r\n        e.target.value.length >= 8 &&\r\n        this.input.password1.current.value === e.target.value\r\n        \r\n      ) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n        this.passwordValid = true;\r\n        this.setState({ before: {login:\"Hasła muszą być identyczne\"} });\r\n\r\n      } else {\r\n        this.passwordValid = false;\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n      }\r\n    },\r\n    email: (e) => {\r\n      if (e.target.value.includes(\".\") && e.target.value.includes(\"@\")) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n        this.emailValid = true;\r\n        this.setState({ before: {login:\"\"} });\r\n\r\n      } else {\r\n        this.emailValid = false;\r\n        this.setState({ before: {login:\"Niepoprawny email\"} });\r\n\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n      }\r\n    },\r\n    login: (e) => {\r\n      if (e.target.value.length >= 5) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n        this.setState({ before: {login:\"\"} });\r\n\r\n      } else {\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n        this.setState({ before: {login:\"Login jest za krótki\"} });\r\n      }\r\n    },\r\n  };\r\n\r\n  signUp = async () => {\r\n    if (this.emailValid && this.passwordValid) {\r\n      const formData = {\r\n        name: this.input.name.current.value,\r\n        surname: this.input.surname.current.value,\r\n        login: this.input.login.current.value,\r\n        email: this.input.email.current.value,\r\n        password1: this.input.password1.current.value,\r\n        password2: this.input.password2.current.value,\r\n      };\r\n\r\n      const fetchData = await fetch(\"http://localhost/blogg/api/register.php\", {\r\n        credentials: \"include\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await fetchData.json();\r\n      if (data.status === 1) {\r\n        this.props.history.push(\"/\");\r\n        this.props.history.go(0);\r\n        this.props.push({ x: data.info, color: \"\" });\r\n      } else {\r\n        //var newNotifications= data.info.map((x,i)=><Modal key={i} color=\"red\">{x}</Modal>);\r\n        //this.setState({ modal: null });\r\n        //this.setState({ modal: newNotifications });\r\n        data.info.map((item) => this.props.push({ x: item, color: \"red\" }));\r\n      }\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"registerBackground\">\r\n          <div className=\"registerBox\">\r\n            <p className=\"registerHeader\">Zarejestruj</p>\r\n\r\n            <form className=\"registerForm\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterName\"\r\n                name=\"name\"\r\n                placeholder=\"imię\"\r\n                autoComplete=\"off\"\r\n                ref={this.input.name}\r\n              />\r\n\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterSurname\"\r\n                name=\"surname\"\r\n                placeholder=\"nazwisko\"\r\n                autoComplete=\"off\"\r\n                ref={this.input.surname}\r\n              />\r\n\r\n              <div>\r\n                <div>{this.state.before.login}</div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterLogin\"\r\n                  name=\"login\"\r\n                  placeholder=\"login\"\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => this.validate.login(e)}\r\n                  ref={this.input.login}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <div>{this.state.before.email}</div>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterEmail\"\r\n                  name=\"email\"\r\n                  placeholder=\"email\"\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => this.validate.email(e)}\r\n                  ref={this.input.email}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <div>{this.state.before.password1}</div>\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword1\"\r\n                  name=\"password1\"\r\n                  placeholder=\"hasło\"\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => this.validate.firtstPassword(e)}\r\n                  ref={this.input.password1}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <div>{this.state.before.password2}</div>\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword2\"\r\n                  name=\"password2\"\r\n                  placeholder=\"powtórz hasło\"\r\n                  autoComplete=\"off\"\r\n                  onChange={(e) => this.validate.secondPassword(e)}\r\n                  ref={this.input.password2}\r\n                />\r\n              </div>\r\n            </form>\r\n\r\n            <div className=\"flexSpace\">\r\n              <div\r\n                className=\"reigisterBackButon\"\r\n                onClick={() => this.props.history.goBack()}\r\n              >\r\n                Powrót\r\n              </div>\r\n\r\n              <div\r\n                className=\"buttonFill loginRegisterButton\"\r\n                onClick={() => this.signUp()}\r\n              >\r\n                Zarejestruj\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n// const mapStateToProps = state => ({\r\n//     isLogged: state.isLogged\r\n// });\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    push: (x) => dispatch(notificationsPush(x)),\r\n  };\r\n};\r\nexport default connect(null, mapDispatchToProps)(Register);\r\n\r\n//export default Register;\r\n"]},"metadata":{},"sourceType":"module"}