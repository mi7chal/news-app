{"ast":null,"code":"var _jsxFileName = \"/Users/michal/Documents/portal_psi/src/list/list.js\",\n    _s = $RefreshSig$();\n\nimport './list.css';\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport ArticleInList from './articleInList/articleInList';\nimport { useLocation, Link } from \"react-router-dom\";\nimport useArticles from './useArticles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction List() {\n  _s();\n\n  let sortByPopular = useRef(null);\n  let sortByDate = useRef(null);\n  let sortByBackground = useRef(null);\n  const location = useLocation();\n  const propsCategory = location.state ? location.state.category : null;\n  const [category, setCategory] = useState(propsCategory);\n  const [offset, setOffset] = useState(0);\n  const [order, setOrder] = useState(\"yes\"); //const [articles, setArticles] = useState([]);\n\n  useEffect(() => {\n    if (order === \"yes\") {}\n\n    setCategory(propsCategory);\n    setOffset(0);\n\n    if (order === \"no\") {\n      sortByBackground.current.style.width = document.querySelector('.listItemToquerySelector2').offsetWidth + \"px\";\n    }\n  }, [propsCategory, order]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    sortByBackground.current.style.width = sortByPopular.current.offsetWidth + \"px\";\n    sortByBackground.current.style.left = sortByPopular.current.offsetLeft + \"px\";\n  }, []);\n  const {\n    articles,\n    hasMore,\n    loading\n  } = useArticles(category, offset, order);\n  const observer = useRef();\n  const lastArticle = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMore) {\n        setOffset(x => x + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loading, hasMore]);\n\n  const changeSort = (e, changeTo) => {\n    sortByBackground.current.style.left = e.target.offsetLeft + \"px\";\n    sortByBackground.current.style.width = e.target.offsetWidth + \"px\";\n\n    if (changeTo === 1) {\n      setOrder(\"no\");\n      setOffset(0);\n    } else if (changeTo === 0) {\n      setOrder(\"yes\");\n      setOffset(0);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"listBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listHeader\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"widthFitContent\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"listsortBy\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            ref: sortByPopular,\n            onClick: e => changeSort(e, 0),\n            className: \"listItemToquerySelector\",\n            children: \"Najpopularniejsze\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            ref: sortByDate,\n            onClick: e => changeSort(e, 1),\n            className: \"listItemToquerySelector2\",\n            children: \"Najnowsze\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: sortByBackground,\n            className: \"sortByBackground\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listHeaderText\",\n        children: [category ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listHeaderTextBox\",\n          children: [\" kategoria: \", category, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 60\n        }, this) : null, category ? /*#__PURE__*/_jsxDEV(Link, {\n          to: '/articles',\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"10\",\n            height: \"10\",\n            viewBox: \"0 0 13.426 13.423\",\n            className: \"closeCategory\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              id: \"Icon_ionic-ios-close\",\n              \"data-name\": \"Icon ionic-ios-close\",\n              d: \"M19.589,18l4.8-4.8A1.124,1.124,0,0,0,22.8,11.616l-4.8,4.8-4.8-4.8A1.124,1.124,0,1,0,11.616,13.2l4.8,4.8-4.8,4.8A1.124,1.124,0,0,0,13.2,24.384l4.8-4.8,4.8,4.8A1.124,1.124,0,1,0,24.384,22.8Z\",\n              transform: \"translate(-11.285 -11.289)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 56\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 33\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"test\",\n      children: articles.map((x, i) => articles.length === i + 1 ? /*#__PURE__*/_jsxDEV(ArticleInList, {\n        object: x,\n        ref: lastArticle\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 72\n      }, this) : /*#__PURE__*/_jsxDEV(ArticleInList, {\n        object: x\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 129\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(List, \"Pud95DM37mmX85h45Wg2J2f5DWo=\", false, function () {\n  return [useLocation, useArticles];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/Users/michal/Documents/portal_psi/src/list/list.js"],"names":["React","useState","useEffect","useRef","useCallback","ArticleInList","useLocation","Link","useArticles","List","sortByPopular","sortByDate","sortByBackground","location","propsCategory","state","category","setCategory","offset","setOffset","order","setOrder","current","style","width","document","querySelector","offsetWidth","window","scrollTo","left","offsetLeft","articles","hasMore","loading","observer","lastArticle","node","disconnect","IntersectionObserver","entries","isIntersecting","x","observe","changeSort","e","changeTo","target","map","i","length"],"mappings":"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","sourcesContent":["import './list.css';\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport ArticleInList from './articleInList/articleInList';\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport useArticles from './useArticles';\r\n\r\nfunction List() {\r\n    let sortByPopular = useRef(null);\r\n    let sortByDate = useRef(null);\r\n    let sortByBackground = useRef(null);\r\n    const location = useLocation();\r\n    const propsCategory = location.state ? location.state.category : null;\r\n    const [category, setCategory] = useState(propsCategory);\r\n    const [offset, setOffset] = useState(0);\r\n    const [order, setOrder] = useState(\"yes\");\r\n\r\n    //const [articles, setArticles] = useState([]);\r\n    useEffect(() => {\r\n        if (order === \"yes\") {\r\n\r\n        }\r\n        setCategory(propsCategory);\r\n        setOffset(0);\r\n        if (order === \"no\") {\r\n            sortByBackground.current.style.width = document.querySelector('.listItemToquerySelector2').offsetWidth + \"px\";\r\n        }\r\n    }, [propsCategory, order]);\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0);\r\n        sortByBackground.current.style.width = sortByPopular.current.offsetWidth + \"px\";\r\n        sortByBackground.current.style.left = sortByPopular.current.offsetLeft + \"px\";\r\n    }, [])\r\n\r\n\r\n\r\n    const {\r\n        articles,\r\n        hasMore,\r\n        loading\r\n    } = useArticles(category, offset, order)\r\n\r\n    const observer = useRef();\r\n    const lastArticle = useCallback(node => {\r\n        if (loading) return\r\n        if (observer.current) observer.current.disconnect()\r\n        observer.current = new IntersectionObserver(entries => {\r\n            if (entries[0].isIntersecting && hasMore) {\r\n                setOffset(x => x + 1)\r\n            }\r\n        })\r\n        if (node) observer.current.observe(node)\r\n\r\n    }, [loading, hasMore])\r\n\r\n\r\n    const changeSort = (e, changeTo) => {\r\n        sortByBackground.current.style.left = e.target.offsetLeft + \"px\";\r\n        sortByBackground.current.style.width = e.target.offsetWidth + \"px\";\r\n        if (changeTo === 1) {\r\n            setOrder(\"no\");\r\n            setOffset(0);\r\n        }\r\n        else if (changeTo === 0) {\r\n            setOrder(\"yes\");\r\n            setOffset(0);\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"listBox\">\r\n            <div className=\"listHeader\">\r\n                <div className=\"widthFitContent\">\r\n                    <ul className=\"listsortBy\">\r\n                        <li ref={sortByPopular} onClick={(e) => changeSort(e, 0)} className=\"listItemToquerySelector\">Najpopularniejsze</li>\r\n                        <li ref={sortByDate} onClick={(e) => changeSort(e, 1)} className=\"listItemToquerySelector2\">Najnowsze</li>\r\n                        <div ref={sortByBackground} className=\"sortByBackground\"></div>\r\n\r\n                    </ul>\r\n                </div>\r\n                <div className=\"listHeaderText\">{category ?<div className=\"listHeaderTextBox\"> kategoria: {category} </div>: null}\r\n                    {category ? <Link to={'/articles'}><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 13.426 13.423\" className=\"closeCategory\">\r\n                        <path id=\"Icon_ionic-ios-close\" data-name=\"Icon ionic-ios-close\" d=\"M19.589,18l4.8-4.8A1.124,1.124,0,0,0,22.8,11.616l-4.8,4.8-4.8-4.8A1.124,1.124,0,1,0,11.616,13.2l4.8,4.8-4.8,4.8A1.124,1.124,0,0,0,13.2,24.384l4.8-4.8,4.8,4.8A1.124,1.124,0,1,0,24.384,22.8Z\" transform=\"translate(-11.285 -11.289)\" />\r\n                    </svg></Link>\r\n                        : null}</div>\r\n            </div>\r\n            <div className=\"test\">\r\n                {\r\n                    articles.map((x, i) => articles.length === i + 1 ? <ArticleInList object={x} key={i} ref={lastArticle} /> : <ArticleInList object={x} key={i} />)\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default List;\r\n"]},"metadata":{},"sourceType":"module"}