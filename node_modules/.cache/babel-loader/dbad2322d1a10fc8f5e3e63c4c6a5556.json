{"ast":null,"code":"var _jsxFileName = \"/Users/michal/Documents/portal_psi/src/components/TextBox.js\",\n    _s = $RefreshSig$();\n\nimport 'components.css';\nimport React, { useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TextBox(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const input = useRef();\n  const [editElement, setEditElement] = useState();\n  let lastLength = 0;\n\n  const onChange = e => {\n    console.log(e.currentTarget);\n    e.currentTarget.style.height = e.currentTarget.scrollHeight + \"px\";\n    const length = e.currentTarget.innerText.length;\n\n    if (length < lastLength) {\n      e.currentTarget.style.height = \"250px\";\n      e.currentTarget.style.height = e.currentTarget.scrollHeight + \"px\";\n    }\n\n    lastLength = length;\n  };\n\n  const onDoubleClick = e => {\n    setEditElement();\n    const selection = window.getSelection();\n\n    if (selection.type == 'Range') {\n      const range = selection.getRangeAt(0);\n      const rect = range.getBoundingClientRect();\n      const inputRect = input.current.getBoundingClientRect();\n      const x = rect.left - inputRect.left,\n            right = rect.right,\n            y = rect.top - inputRect.top;\n      setEditElement( /*#__PURE__*/_jsxDEV(SelectMarker, {\n        pos: {\n          x,\n          y\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 22\n      }, this));\n      console.log(range);\n    } //document.execCommand('underline', false, null);\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputArea\",\n      onInput: e => onChange(e),\n      contentEditable: \"true\",\n      onSelect: e => onDoubleClick(e),\n      ref: input,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), editElement]\n  }, void 0, true);\n}\n\n_s(TextBox, \"WolP1NhymqyU57euNGdvAJ8gvxA=\");\n\n_c = TextBox;\n\nfunction SelectMarker(_ref2) {\n  let {\n    pos\n  } = _ref2;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'absolute',\n      top: pos.y - 25,\n      left: pos.x\n    },\n    unselectable: \"on\",\n    className: \"selectMarker\",\n    autocomplete: \"off\",\n    autocorrect: \"off\",\n    autocapitalize: \"off\",\n    spellcheck: \"false\",\n    onSelect: e => e.preventDefault(),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('bold', false, null),\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 70\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('italic', false, null),\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        children: \"I\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 72\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('underline', false, null),\n      children: /*#__PURE__*/_jsxDEV(\"u\", {\n        children: \"U\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 75\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('justifyLeft', false, null),\n      children: \"Left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('justifyCenter', false, null),\n      children: \"Center\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => document.execCommand('insertUnorderedList', false, null),\n      children: \"Punctors\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = SelectMarker;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TextBox\");\n$RefreshReg$(_c2, \"SelectMarker\");","map":{"version":3,"sources":["/Users/michal/Documents/portal_psi/src/components/TextBox.js"],"names":["React","useRef","useState","TextBox","children","input","editElement","setEditElement","lastLength","onChange","e","console","log","currentTarget","style","height","scrollHeight","length","innerText","onDoubleClick","selection","window","getSelection","type","range","getRangeAt","rect","getBoundingClientRect","inputRect","current","x","left","right","y","top","SelectMarker","pos","position","preventDefault","document","execCommand"],"mappings":"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","sourcesContent":["import 'components.css';\nimport React, { useRef, useState } from 'react';\n\nexport default function TextBox({children}) {\n  const input = useRef();\n  const [editElement, setEditElement] = useState()\n  let lastLength = 0;\n  const onChange = (e) => {\n    console.log(e.currentTarget)\n    e.currentTarget.style.height = e.currentTarget.scrollHeight + \"px\";\n    const length = e.currentTarget.innerText.length;\n    if (length < lastLength) {\n      e.currentTarget.style.height = \"250px\";\n      e.currentTarget.style.height = e.currentTarget.scrollHeight + \"px\";\n    }\n    lastLength = length;\n  }\n\n  const onDoubleClick = (e) => {\n    setEditElement();\n    const selection = window.getSelection();\n\n    if (selection.type == 'Range') {\n      const range = selection.getRangeAt(0);\n      const rect = range.getBoundingClientRect();\n      const inputRect = input.current.getBoundingClientRect();\n      const x = rect.left - inputRect.left, right = rect.right, y = rect.top - inputRect.top;\n      setEditElement(<SelectMarker pos={{ x, y }}></SelectMarker >);\n      console.log(range);\n    }\n\n    //document.execCommand('underline', false, null);\n  }\n\n  return (\n    <>\n      <div className=\"inputArea\" onInput={(e) => onChange(e)} contentEditable=\"true\" onSelect={(e) => onDoubleClick(e)} ref={input}>\n        {children}\n      </div>\n      {editElement}\n    </>\n  )\n}\n\n\n\n\n\n\n\nfunction SelectMarker({ pos }) {\n\n  return (\n    <div style={{ position: 'absolute', top: pos.y - 25, left: pos.x }} unselectable=\"on\" className=\"selectMarker\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" onSelect={e => e.preventDefault()}>\n      <div onClick={() => document.execCommand('bold', false, null)}><b>B</b></div>\n      <div onClick={() => document.execCommand('italic', false, null)}><i>I</i></div>\n      <div onClick={() => document.execCommand('underline', false, null)}><u>U</u></div>\n      <div onClick={() => document.execCommand('justifyLeft', false, null)}>Left</div>\n      <div onClick={() => document.execCommand('justifyCenter', false, null)}>Center</div>\n      <div onClick={() => document.execCommand('insertUnorderedList', false, null)}>Punctors</div>\n\n\n    </div>\n\n  )\n}"]},"metadata":{},"sourceType":"module"}