{"ast":null,"code":"var _jsxFileName = \"/Users/michal/Documents/portal_psi/src/register/register.js\";\nimport \"./register.css\";\nimport React, { useState } from \"react\";\nimport { notificationsPush } from \"../redux/actions/\";\nimport { connect } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.validate = {\n      firtstPassword: e => {\n        if (e.target.value.length >= 8) e.target.style.borderColor = \"var(--background3)\";else e.target.style.borderColor = \"#c21d1d\";\n      },\n      secondPassword: e => {\n        if (e.target.value.length >= 8 && this.input.password1.current.value === e.target.value) {\n          e.target.style.borderColor = \"var(--background3)\";\n          this.passwordValid = true;\n        } else {\n          this.passwordValid = false;\n          e.target.style.borderColor = \"#c21d1d\";\n        }\n      },\n      email: e => {\n        if (e.target.value.includes(\".\") && e.target.value.includes(\"@\")) {\n          e.target.style.borderColor = \"var(--background3)\";\n          this.emailValid = true;\n        } else {\n          this.emailValid = false;\n          e.target.style.borderColor = \"#c21d1d\";\n        }\n      },\n      login: e => {\n        if (e.target.value.length >= 5) {\n          e.target.style.borderColor = \"var(--background3)\";\n        } else {\n          e.target.style.borderColor = \"#c21d1d\";\n          this.setState(beforeLogin, 2);\n        }\n      }\n    };\n\n    this.signUp = async () => {\n      if (this.emailValid && this.passwordValid) {\n        const formData = {\n          name: this.input.name.current.value,\n          surname: this.input.surname.current.value,\n          login: this.input.login.current.value,\n          email: this.input.email.current.value,\n          password1: this.input.password1.current.value,\n          password2: this.input.password2.current.value\n        };\n        const fetchData = await fetch(\"http://localhost/blogg/api/register.php\", {\n          credentials: \"include\",\n          method: \"POST\",\n          body: JSON.stringify(formData)\n        });\n        const data = await fetchData.json();\n\n        if (data.status === 1) {\n          this.props.history.push(\"/\");\n          this.props.history.go(0);\n          this.props.push({\n            x: data.info,\n            color: \"\"\n          });\n        } else {\n          //var newNotifications= data.info.map((x,i)=><Modal key={i} color=\"red\">{x}</Modal>);\n          //this.setState({ modal: null });\n          //this.setState({ modal: newNotifications });\n          data.info.map(item => this.props.push({\n            x: item,\n            color: \"red\"\n          }));\n        }\n      } else {\n        return 0;\n      }\n    };\n\n    this.emailValid = false;\n    this.passwordValid = false;\n    this.loginValid = false;\n    this.input = {};\n    this.input.name = /*#__PURE__*/React.createRef();\n    this.input.surname = /*#__PURE__*/React.createRef();\n    this.input.login = /*#__PURE__*/React.createRef();\n    this.input.email = /*#__PURE__*/React.createRef();\n    this.input.password1 = /*#__PURE__*/React.createRef();\n    this.input.password2 = /*#__PURE__*/React.createRef();\n    this.input.beforeLogin = /*#__PURE__*/React.createRef();\n    this.input.beforeEmail = /*#__PURE__*/React.createRef();\n    this.input.beforePassword1 = /*#__PURE__*/React.createRef();\n    this.input.beforePassword2 = /*#__PURE__*/React.createRef();\n    this.state = {\n      modal: [],\n      beforeLogin: ''\n    };\n\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  onLogout() {}\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.loggedAlready) {\n      this.props.history.push(\"/\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"registerBackground\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registerBox\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"registerHeader\",\n            children: \"Zarejestruj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"registerForm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterName\",\n              name: \"name\",\n              placeholder: \"imi\\u0119\",\n              autoComplete: \"off\",\n              ref: this.input.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterSurname\",\n              name: \"surname\",\n              placeholder: \"nazwisko\",\n              autoComplete: \"off\",\n              ref: this.input.surname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this), this.beforeLogin, /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterLogin\",\n              name: \"login\",\n              placeholder: \"login\",\n              autoComplete: \"off\",\n              onChange: e => this.validate.login(e),\n              ref: this.input.login\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: this.input.beforeEmail\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterEmail\",\n              name: \"email\",\n              placeholder: \"email\",\n              autoComplete: \"off\",\n              onChange: e => this.validate.email(e),\n              ref: this.input.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: this.input.beforePassword1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword1\",\n              name: \"password1\",\n              placeholder: \"has\\u0142o\",\n              autoComplete: \"off\",\n              onChange: e => this.validate.firtstPassword(e),\n              ref: this.input.password1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: this.input.beforePassword2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword2\",\n              name: \"password2\",\n              placeholder: \"powt\\xF3rz has\\u0142o\",\n              autoComplete: \"off\",\n              onChange: e => this.validate.secondPassword(e),\n              ref: this.input.password2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexSpace\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"reigisterBackButon\",\n              onClick: () => this.props.history.goBack(),\n              children: \"Powr\\xF3t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"buttonFill loginRegisterButton\",\n              onClick: () => this.signUp(),\n              children: \"Zarejestruj\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n\n} // const mapStateToProps = state => ({\n//     isLogged: state.isLogged\n// });\n\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    push: x => dispatch(notificationsPush(x))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Register); //export default Register;","map":{"version":3,"sources":["/Users/michal/Documents/portal_psi/src/register/register.js"],"names":["React","useState","notificationsPush","connect","Register","Component","constructor","props","validate","firtstPassword","e","target","value","length","style","borderColor","secondPassword","input","password1","current","passwordValid","email","includes","emailValid","login","setState","beforeLogin","signUp","formData","name","surname","password2","fetchData","fetch","credentials","method","body","JSON","stringify","data","json","status","history","push","go","x","info","color","map","item","loginValid","createRef","beforeEmail","beforePassword1","beforePassword2","state","modal","loggedAlready","onLogout","componentDidMount","window","scrollTo","componentDidUpdate","render","goBack","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import \"./register.css\";\r\nimport React, {useState} from \"react\";\r\nimport { notificationsPush } from \"../redux/actions/\";\r\nimport { connect } from \"react-redux\";\r\n\r\nclass Register extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.emailValid = false;\r\n    this.passwordValid = false;\r\n    this.loginValid = false;\r\n\r\n    this.input = {};\r\n\r\n    this.input.name = React.createRef();\r\n    this.input.surname = React.createRef();\r\n    this.input.login = React.createRef();\r\n    this.input.email = React.createRef();\r\n    this.input.password1 = React.createRef();\r\n    this.input.password2 = React.createRef();\r\n\r\n    this.input.beforeLogin = React.createRef();\r\n    this.input.beforeEmail = React.createRef();\r\n    this.input.beforePassword1 = React.createRef();\r\n    this.input.beforePassword2 = React.createRef();\r\n\r\n\r\n    this.state = {\r\n      modal: [],\r\n      beforeLogin:''\r\n    };\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  onLogout() {}\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.loggedAlready) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n  }\r\n\r\n  validate = {\r\n    firtstPassword: (e) => {\r\n      if (e.target.value.length >= 8)\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n      else e.target.style.borderColor = \"#c21d1d\";\r\n    },\r\n    secondPassword: (e) => {\r\n      if (\r\n        e.target.value.length >= 8 &&\r\n        this.input.password1.current.value === e.target.value\r\n      ) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n        this.passwordValid = true;\r\n      } else {\r\n        this.passwordValid = false;\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n      }\r\n    },\r\n    email: (e) => {\r\n      if (e.target.value.includes(\".\") && e.target.value.includes(\"@\")) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n        this.emailValid = true;\r\n      } else {\r\n        this.emailValid = false;\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n      }\r\n    },\r\n    login: (e) => {\r\n      if (e.target.value.length >= 5) {\r\n        e.target.style.borderColor = \"var(--background3)\";\r\n      } else {\r\n        e.target.style.borderColor = \"#c21d1d\";\r\n        this.setState(beforeLogin, 2)\r\n      }\r\n    },\r\n  };\r\n\r\n  signUp = async () => {\r\n    if (this.emailValid && this.passwordValid) {\r\n      const formData = {\r\n        name: this.input.name.current.value,\r\n        surname: this.input.surname.current.value,\r\n        login: this.input.login.current.value,\r\n        email: this.input.email.current.value,\r\n        password1: this.input.password1.current.value,\r\n        password2: this.input.password2.current.value,\r\n      };\r\n\r\n      const fetchData = await fetch(\"http://localhost/blogg/api/register.php\", {\r\n        credentials: \"include\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await fetchData.json();\r\n      if (data.status === 1) {\r\n        this.props.history.push(\"/\");\r\n        this.props.history.go(0);\r\n        this.props.push({ x: data.info, color: \"\" });\r\n      } else {\r\n        //var newNotifications= data.info.map((x,i)=><Modal key={i} color=\"red\">{x}</Modal>);\r\n        //this.setState({ modal: null });\r\n        //this.setState({ modal: newNotifications });\r\n        data.info.map((item) => this.props.push({ x: item, color: \"red\" }));\r\n      }\r\n    } else {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"registerBackground\">\r\n          <div className=\"registerBox\">\r\n            <p className=\"registerHeader\">Zarejestruj</p>\r\n\r\n            <form className=\"registerForm\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterName\"\r\n                name=\"name\"\r\n                placeholder=\"imię\"\r\n                autoComplete=\"off\"\r\n                ref={this.input.name}\r\n              />\r\n\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterSurname\"\r\n                name=\"surname\"\r\n                placeholder=\"nazwisko\"\r\n                autoComplete=\"off\"\r\n                ref={this.input.surname}\r\n              />\r\n\r\n              {this.beforeLogin}\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterLogin\"\r\n                name=\"login\"\r\n                placeholder=\"login\"\r\n                autoComplete=\"off\"\r\n                onChange={(e) => this.validate.login(e)}\r\n                ref={this.input.login}\r\n              />\r\n\r\n              <div ref={this.input.beforeEmail}></div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterEmail\"\r\n                name=\"email\"\r\n                placeholder=\"email\"\r\n                autoComplete=\"off\"\r\n                onChange={(e) => this.validate.email(e)}\r\n                ref={this.input.email}\r\n              />\r\n\r\n              <div ref={this.input.beforePassword1}></div>\r\n              <input\r\n                type=\"password\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword1\"\r\n                name=\"password1\"\r\n                placeholder=\"hasło\"\r\n                autoComplete=\"off\"\r\n                onChange={(e) => this.validate.firtstPassword(e)}\r\n                ref={this.input.password1}\r\n              />\r\n\r\n              <div ref={this.input.beforePassword2}></div>\r\n              <input\r\n                type=\"password\"\r\n                className=\"registerComponentInput loginRegisterInput toSelect uniqueRegisterPassword2\"\r\n                name=\"password2\"\r\n                placeholder=\"powtórz hasło\"\r\n                autoComplete=\"off\"\r\n                onChange={(e) => this.validate.secondPassword(e)}\r\n                ref={this.input.password2}\r\n              />\r\n            </form>\r\n\r\n            <div className=\"flexSpace\">\r\n              <div\r\n                className=\"reigisterBackButon\"\r\n                onClick={() => this.props.history.goBack()}\r\n              >\r\n                Powrót\r\n              </div>\r\n\r\n              <div\r\n                className=\"buttonFill loginRegisterButton\"\r\n                onClick={() => this.signUp()}\r\n              >\r\n                Zarejestruj\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n// const mapStateToProps = state => ({\r\n//     isLogged: state.isLogged\r\n// });\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    push: (x) => dispatch(notificationsPush(x)),\r\n  };\r\n};\r\nexport default connect(null, mapDispatchToProps)(Register);\r\n\r\n//export default Register;\r\n"]},"metadata":{},"sourceType":"module"}