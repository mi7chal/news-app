{"ast":null,"code":"var _jsxFileName = \"/Users/michal/Documents/portal_psi/src/list/list.js\",\n    _s = $RefreshSig$();\n\nimport \"./list.css\";\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport ArticleInList from \"./articleInList/articleInList\";\nimport { useLocation, Link } from \"react-router-dom\";\nimport useArticles from \"./useArticles\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction List() {\n  _s();\n\n  let sortByPopular = useRef(null);\n  let sortByDate = useRef(null);\n  let sortByBackground = useRef(null);\n  const location = useLocation();\n  const propsCategory = location.state ? location.state.category : null;\n  const [category, setCategory] = useState(propsCategory);\n  const [offset, setOffset] = useState(0);\n  const [order, setOrder] = useState(\"yes\"); //const [articles, setArticles] = useState([]);\n\n  useEffect(() => {\n    if (order === \"yes\") {}\n\n    setCategory(propsCategory);\n    setOffset(0);\n\n    if (order === \"no\") {\n      sortByBackground.current.style.width = document.querySelector(\".listItemToquerySelector2\").offsetWidth + \"px\";\n    }\n  }, [propsCategory, order]);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    sortByBackground.current.style.width = sortByPopular.current.offsetWidth + \"px\";\n    sortByBackground.current.style.left = sortByPopular.current.offsetLeft + \"px\";\n  }, []);\n  const {\n    articles,\n    hasMore,\n    loading\n  } = useArticles(category, offset, order);\n  const observer = useRef();\n  const lastArticle = useCallback(node => {\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && hasMore) {\n        setOffset(x => x + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loading, hasMore]);\n\n  const changeSort = (e, changeTo) => {\n    sortByBackground.current.style.left = e.target.offsetLeft + \"px\";\n    sortByBackground.current.style.width = e.target.offsetWidth + \"px\";\n\n    if (changeTo === 1) {\n      setOrder(\"no\");\n      setOffset(0);\n    } else if (changeTo === 0) {\n      setOrder(\"yes\");\n      setOffset(0);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"listBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"listHeader\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"widthFitContent\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"listsortBy\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            ref: sortByPopular,\n            onClick: e => changeSort(e, 0),\n            className: \"listItemToquerySelector\",\n            children: \"Najpopularniejsze\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            ref: sortByDate,\n            onClick: e => changeSort(e, 1),\n            className: \"listItemToquerySelector2\",\n            children: \"Najnowsze\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: sortByBackground,\n            className: \"sortByBackground\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"listHeaderText\",\n        children: [category ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"listHeaderTextBox\",\n          children: [\" kategoria: \", category, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this) : null, category ? /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/articles\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"10\",\n            height: \"10\",\n            viewBox: \"0 0 13.426 13.423\",\n            className: \"closeCategory\",\n            fill: \"var(--textOnBackground)\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              id: \"Icon_ionic-ios-close\",\n              \"data-name\": \"Icon ionic-ios-close\",\n              d: \"M19.589,18l4.8-4.8A1.124,1.124,0,0,0,22.8,11.616l-4.8,4.8-4.8-4.8A1.124,1.124,0,1,0,11.616,13.2l4.8,4.8-4.8,4.8A1.124,1.124,0,0,0,13.2,24.384l4.8-4.8,4.8,4.8A1.124,1.124,0,1,0,24.384,22.8Z\",\n              transform: \"translate(-11.285 -11.289)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"test\",\n      children: articles.map((x, i) => articles.length === i + 1 ? /*#__PURE__*/_jsxDEV(ArticleInList, {\n        object: x,\n        ref: lastArticle\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(ArticleInList, {\n        object: x\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(List, \"08yJbsqhYNSzpobTpIL+Zs3LL+o=\", false, function () {\n  return [useLocation, useArticles];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/Users/michal/Documents/portal_psi/src/list/list.js"],"names":["React","useState","useEffect","useRef","useCallback","ArticleInList","useLocation","Link","useArticles","List","sortByPopular","sortByDate","sortByBackground","location","propsCategory","state","category","setCategory","offset","setOffset","order","setOrder","current","style","width","document","querySelector","offsetWidth","window","scrollTo","left","offsetLeft","articles","hasMore","loading","observer","lastArticle","node","disconnect","IntersectionObserver","entries","isIntersecting","x","observe","changeSort","e","changeTo","target","map","i","length"],"mappings":"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","sourcesContent":["import \"./list.css\";\r\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport ArticleInList from \"./articleInList/articleInList\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport useArticles from \"./useArticles\";\r\n\r\nfunction List() {\r\n  let sortByPopular = useRef(null);\r\n  let sortByDate = useRef(null);\r\n  let sortByBackground = useRef(null);\r\n  const location = useLocation();\r\n  const propsCategory = location.state ? location.state.category : null;\r\n  const [category, setCategory] = useState(propsCategory);\r\n  const [offset, setOffset] = useState(0);\r\n  const [order, setOrder] = useState(\"yes\");\r\n\r\n  //const [articles, setArticles] = useState([]);\r\n  useEffect(() => {\r\n    if (order === \"yes\") {\r\n    }\r\n    setCategory(propsCategory);\r\n    setOffset(0);\r\n    if (order === \"no\") {\r\n      sortByBackground.current.style.width =\r\n        document.querySelector(\".listItemToquerySelector2\").offsetWidth + \"px\";\r\n    }\r\n  }, [propsCategory, order]);\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    sortByBackground.current.style.width =\r\n      sortByPopular.current.offsetWidth + \"px\";\r\n    sortByBackground.current.style.left =\r\n      sortByPopular.current.offsetLeft + \"px\";\r\n  }, []);\r\n\r\n  const { articles, hasMore, loading } = useArticles(category, offset, order);\r\n\r\n  const observer = useRef();\r\n  const lastArticle = useCallback(\r\n    (node) => {\r\n      if (loading) return;\r\n      if (observer.current) observer.current.disconnect();\r\n      observer.current = new IntersectionObserver((entries) => {\r\n        if (entries[0].isIntersecting && hasMore) {\r\n          setOffset((x) => x + 1);\r\n        }\r\n      });\r\n      if (node) observer.current.observe(node);\r\n    },\r\n    [loading, hasMore]\r\n  );\r\n\r\n  const changeSort = (e, changeTo) => {\r\n    sortByBackground.current.style.left = e.target.offsetLeft + \"px\";\r\n    sortByBackground.current.style.width = e.target.offsetWidth + \"px\";\r\n    if (changeTo === 1) {\r\n      setOrder(\"no\");\r\n      setOffset(0);\r\n    } else if (changeTo === 0) {\r\n      setOrder(\"yes\");\r\n      setOffset(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"listBox\">\r\n      <div className=\"listHeader\">\r\n        <div className=\"widthFitContent\">\r\n          <ul className=\"listsortBy\">\r\n            <li\r\n              ref={sortByPopular}\r\n              onClick={(e) => changeSort(e, 0)}\r\n              className=\"listItemToquerySelector\"\r\n            >\r\n              Najpopularniejsze\r\n            </li>\r\n            <li\r\n              ref={sortByDate}\r\n              onClick={(e) => changeSort(e, 1)}\r\n              className=\"listItemToquerySelector2\"\r\n            >\r\n              Najnowsze\r\n            </li>\r\n            <div ref={sortByBackground} className=\"sortByBackground\"></div>\r\n          </ul>\r\n        </div>\r\n        <div className=\"listHeaderText\">\r\n          {category ? (\r\n            <div className=\"listHeaderTextBox\"> kategoria: {category} </div>\r\n          ) : null}\r\n          {category ? (\r\n            <Link to={\"/articles\"}>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"10\"\r\n                height=\"10\"\r\n                viewBox=\"0 0 13.426 13.423\"\r\n                className=\"closeCategory\"\r\n                fill=\"var(--textOnBackground)\"\r\n              >\r\n                <path\r\n                  id=\"Icon_ionic-ios-close\"\r\n                  data-name=\"Icon ionic-ios-close\"\r\n                  d=\"M19.589,18l4.8-4.8A1.124,1.124,0,0,0,22.8,11.616l-4.8,4.8-4.8-4.8A1.124,1.124,0,1,0,11.616,13.2l4.8,4.8-4.8,4.8A1.124,1.124,0,0,0,13.2,24.384l4.8-4.8,4.8,4.8A1.124,1.124,0,1,0,24.384,22.8Z\"\r\n                  transform=\"translate(-11.285 -11.289)\"\r\n                />\r\n              </svg>\r\n            </Link>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n      <div className=\"test\">\r\n        {articles.map((x, i) =>\r\n          articles.length === i + 1 ? (\r\n            <ArticleInList object={x} key={i} ref={lastArticle} />\r\n          ) : (\r\n            <ArticleInList object={x} key={i} />\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default List;\r\n"]},"metadata":{},"sourceType":"module"}